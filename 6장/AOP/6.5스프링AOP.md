# 6.5 스프링 AOP

## 6.5.1 자동 프록시 생성
### 중복 문제의 접근 방법
JDK의 다이내믹 프록시는 특정 인터페이스를 구현한 오브젝트에 대해서 프록시 역할을 해주는 클래스를 런타임 시 내부적으로 만들어준다. 런타임 시 만들어져 사용되기 때문에 클래스 소스가 따로 남지 않을 뿐, 타깃 인터페이스의 모든 메소드를 구현하는 클래스가 만들어진다.

#### 변하는 로직과 변하지 않는 기계적인 코드 분리
* 변하지 않는 타깃으로의 위임과 부가기능 적용 여부 판단 부분 -> 코드 생성 기법을 이용하는 다이내믹 프록시 기술에 맡김
* 변하는 부가기능 코드 -> 별도로 만들어서 다이내믹 프록시 생성, 팩토리에 DI로 제공하는 방법 사용

* *반복적인 프록시 메소드의 구현은 코드 자동 생성 기법을 이용해 해결, 반복적인 ProxyFactoryBean 설정 문제는 설정 자동등록 기법으로 해결할 수 없을까?*

> 
>
### 빈 후처리기를 이용한 자동 프록시 생성기
스프링은 컨테이너로서 제공하는 기능 중에서 변하지 않는 핵심적인 부분 외에는 대부분 확장할 수 있도록 확장 포인트를 제공해줌
> 확장 포인트? 
* 그 중 **BeanPostProcessor 인터페이스를 구현해서 만든 빈 후처리기**는 이름 그대로 스프링 빈 오브젝트로 만들어지고 난 후에, 빈 오브젝트를 다시 가공할 수 있게 해 줌

#### # DefaultAdvisorAutoProxyCreator란
스프링이 제공하는 빈 후처리기 중 하나로 어드바이저를 이용한 자동 프록시 생성기. 
> 어드바이저?
* 빈 후처리기를 스프링에 적용하는 방법: 빈 후처리기 자체를 빈으로 등록
* 스프링은 빈 후처리기가 빈으로 등록되어 있으면 빈 오브젝트가 생성될 때마다 빈 후처리기에 보내서 후처리 작업을 요청
* 빈 후처리기는 빈 오브젝트의 프로퍼티를 강제로 수정할 수도 있고 별도의 초기화 작업을 수행할 수도 있으며, 만들어진 빈오브젝트 자체를 바꿔치기 할 수도 있음. 따라서 스프링이 설정을 참고해서 만든 오브젝트가 아닌 다른 오브젝트를 빈으로 등록시키는 것이 가능

#### **>> 이를 잘 활용하면 스프링이 생성하는 빈 프로젝트의 일부를 프록시로 보장하고, 프록시를 빈으로 대신 등록할 수도 있음**

>

#### # DefaultAdvisorAutoProxyCreator 빈 후처리기가 등록되어 있으면 스프링은 빈 오브젝트를 만들 때마다 후처리기에게 빈을 보냄
1. DefaultAdvisorAutoProxyCreator는 빈으로 등록한 모든 어드바이저 내의 포인트컷을 이용해 전달받은 빈이 프록시 적용 대상인지 확인
> 포인트컷?
2. 프록시 적용 대상이면 그때는 내장된 프록시 생성기에게 현재 빈에 대한 프록시를 만들게 하고, 만들어진 프록시에 어드바이저를 연결
3. 빈 후처리기는 프록시가 생성되면 원래 컨테이너가 전달해준 빈 오브젝트 대신 프록시 오브젝트를 컨테이너에게 돌려줌
4. 컨테이너는 최종적으로 빈 후처리기가 돌려준 오브젝트를 빈으로 등록하고 사용

#### **>> 적용할 빈을 선정하는 로직이 추가된 포인트컷이 담긴 어드바이저를 등록하고 빈 후처리기를 사용하면 일일이 ProxyFactoryBean 빈을 등록하지 않아도 타깃 오브젝트에 자동으로 프록시가 적용되게 할 수 있음**


### 확장된 포인트 컷


## 6.5.2 DefaultAdvisorAutoProxyCreator의 적용
## 6.5.3 포인트컷 표현식을 이용한 포인트컷
## 6.5.4 AOP란 무엇인가?
## 6.5.5 AOP 적용기술
## 6.5.6 AOP의 용어
## 6.5.7 AOP
